<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-COMPATIBLE" CONTENT="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="/css/account_password.css" />
    <title>Title</title>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <style>
        #sixtyget {
            float: left;
            background: none;
            border: none;
            width: 140px;
            height: 30px;
            cursor: pointer;
        }
        .on {
            background-color: #eee;
            color: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="left-one">



        <div class="left-two">
            <img class="img-five" src="/img/tuceng512.png" style="margin: -80px 0 0 -20px" height="140" width="75" alt="" />
            <img class="img-six" src="/img/zu45.png" height="106" width="83" style="margin: -67px -20px 0 0px;float: right" alt="" />
            <div class="zhong">
                <div class="left-three">
                    <img src="/img/fenzu2(1).png" height="64" width="210" alt="" />
                </div>
                <div class="left-four">
                    <span class="verify" onclick="pwd(0)">账号登陆</span>
                    <span class="verify" onclick="pwd(1)">短信登陆</span>
                </div>
                <input class="text-one text" id="username" type="text" placeholder="请输您的账号" /><hr />
                <input class="text-two text" id="password" type="password" placeholder="请输入密码" /><hr />

                <div class="left-five" onclick="loginSubmit();">
                    登录
                </div>
                <div class="left-six">
                    <span class="verify" onclick="pwd(2)">没有账号,立即注册</span>
                    <span class="verify" onclick="pwd(3)">忘记密码?</span>
                </div>
            </div>

            <div class="zhong" style="display:none;">
                <div class="left-three">
                    <img src="/img/fenzu2(1).png" height="64" width="210" alt="" />
                </div>
                <div class="left-nine">
                    <span class="verify" onclick="pwd(0)">账号登陆</span>
                    <span class="verify" onclick="pwd(1)">短信登陆</span>
                </div>
                <form action="/register/msgRegister" method="post">
                    <div class="center-one">
                        <span>中国(CN)86</span>
                        <input type="text" placeholder="请输入手机号" id="phonenum" name="phonenum" style="outline: none"/>
                    </div><hr />
                    <div class="form-inline" style="border-bottom: solid 1px rgba(153,153,153,1);width: 374px;height: 80px;margin-left: 50px;">
                    <input class="text-four text form-group" type="text" placeholder="请输入短信验证码" id="messageCode" name="messageCode" style="outline: none;margin-top: 30px     "/>
                    <input type="button"  id="sixtyget"   class=" form-group" onclick="sendMsg()" value="获取验证码" style="margin-left: 80px;margin-top: 30px ;border: none;background:none;font-size: 18px;outline: none;cursor: pointer"/>
            </div>
                    <input type="submit" value="登录"  class="left-five"  style="margin-top:40px;border: none"/>
                </form>

                <div class="left-six">
                    <span class="verify" onclick="pwd(2)">没有账号,立即注册</span>
                    <span class="verify" onclick="pwd(3)">忘记密码?</span>
                </div>
            </div>

            <div class="zhong" style="display:none;">
                <div class="left-three">
                    <img src="/img/fenzu2(1).png" height="64" width="210" alt="" />
                </div>
                <div class="right-one">
                    <span>已经注册</span>
                    <span class="verify" onclick="pwd(0)">马上登录<<</span>
                </div>

                <form method="post" action="/register/userAndPassRegister">
                    <div class="center-one">
                        <input type="text" placeholder="请输入用户名" name="username1" style="margin-left: 30px" />
                    </div><hr />
                    <!--<input class="text-three text" type="text" placeholder="请输入图形验证码" />-->
                    <!--<canvas id="auth-codea" class="yan"></canvas><hr />-->
                    <!--<input class="text-four text" type="text" placeholder="请输入短信验证码" />-->
                    <!--<span class="center-three">发送验证码</span><hr />-->
                    <input class="text-five text" type="password" name="password1" placeholder="输入密码,长度**位字母数字组合" /><hr />
                    <input class="text-five text" type="password" placeholder="输入密码,长度**位字母数字组合" /><hr />
                    <input class="text-five text" type="text" name="phonenum1" placeholder="请输入手机号" /><hr />
                    <input class="left-five" type="submit" value="注册"  style="margin-top:40px;"/>
                </form>
            </div>

            <div class="zhong" style="display:none;">
                <div class="left-three">
                    <img style="margin-left:45px;" src="/img/fenzu22.png" height="29" width="119" alt="" />
                </div>
                <div class="right-one">
                    <span>已经注册</span>
                    <span class="verify" onclick="pwd(0)">马上登录<<</span>
                </div>
                <div class="center-one">
                    <span>中国(CN)86</span>
                    <input type="text" placeholder="请输入手机" />
                </div><hr />
                <!--<input class="text-three text" type="text" placeholder="请输入图形验证码" />-->
                <!--<canvas id="auth-codeb" class="yan"></canvas><hr />-->
                <input class="text-four text" type="text" placeholder="请输入短信验证码" />
                <span class="center-three">发送验证码</span><hr />
                <input class="text-five text" type="text" placeholder="输入密码,长度**位字母数字组合" /><hr />
                <input class="text-five text" type="password" placeholder="输入密码,长度**位字母数字组合" /><hr />
                <div class="left-five" onclick="auth(2)" style="margin-top:40px;">
                    完成
                </div>
            </div>
        </div>

    </div>
    <input type="hidden" id="returnUrl" th:value="${returnUrl}">

    <script src="/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
        var zhong=document.getElementsByClassName("zhong");
        var verify=document.getElementsByClassName("verify");
        var lefttwo=document.getElementsByClassName("left-two");
        var leftfive=document.getElementsByClassName("left-five");
        var textthree=document.getElementsByClassName("text-three");
        function pwd(s){
            for(var i=0;i<zhong.length;i++){
                zhong[i].style.display="none";
            }
            if(s<2){
                lefttwo[0].style.height="629px";
            }else{
                lefttwo[0].style.height="720px";
            }
            zhong[s].style.display="block";
        }

        // 发送短信
        function sendMsg() {
            var phonenum = $("#phonenum").val();
            if (phonenum == null) {
                alert("请输入手机号");
            }else {
                $.post("/sms/sendCode",{phonenum:phonenum});
            }
        }

        $("#sixtyget").click(btnCheck);
        function btnCheck() {
            $(this).addClass("on");
            var time = 60;
            $(this).attr("disabled", true);
            var timer = setInterval(function() {
                if (time == 0) {
                    clearInterval(timer);
                    $("#sixtyget").attr("disabled", false);
                    $("#sixtyget").val("获取验证码");
                    $("#sixtyget").removeClass("on");
                } else {
                    $('#sixtyget').val(time + "秒");
                    time--;
                }
            }, 1000);
        }



        function loginSubmit() {
            var username = $("#username").val();
            var password = $("#password").val();
            var returnUrl = $("#returnUrl").val();
            var token1 = null;
            $.post("/passport/login",{username:username,password:password},function (result) {
                if (result == "failed") {
                    alert("用户名或者密码错误,请重新输入！")
                }else {
                    window.location.href=returnUrl + "?token=" + result;
                }
            })

        }
    </script>
</body>
</html>